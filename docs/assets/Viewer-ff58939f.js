import{d as y,b as w,e as U,f as $,g as z,o as i,c as u,a as l,n as b,h as R,i as D,j as d,w as v,v as f,k as H,l as M,F as x,r as g,t as B}from"./index-32b6ad30.js";const N=y({__name:"ViewerBox",props:{autoScale:{type:Boolean,default:!1},isDebug:{type:Boolean,default:!1},viewBox:{default:()=>[0,0,1920,1080]},scale:{default:1}},setup(h){const e=h,a=w(),s=w(0),t=w(0);let r,c;const m=()=>{a.value&&(s.value=a.value.offsetHeight,t.value=a.value.offsetWidth)};U(()=>{e.autoScale&&a.value&&(r=new IntersectionObserver(o=>o.forEach(n=>n.isIntersecting&&m())),r.observe(a.value),c=new ResizeObserver(m),c.observe(a.value))}),$(()=>{r.disconnect(),c.disconnect()});const p=z(()=>{if(!e.autoScale)return e.scale;const o=t.value,n=s.value,[C,E,V,_]=e.viewBox;if(n&&o){const S=n/_,k=o/V;return Math.min(S,k)}return 1});return(o,n)=>(i(),u("div",{ref_key:"rootRef",ref:a,class:"relative flex justify-center items-center"},[l("div",{class:"relative overflow-hidden bg-gray/50",style:b([{width:o.viewBox[2]*p.value+"px",height:o.viewBox[3]*p.value+"px"},{transition:"height 1s,width 1s"}])},[l("div",{ref:"el",class:"absolute bg-gray/50",style:b([{"transform-origin":"0 0",transition:"transform 1s"},{transform:`scale(${p.value}) translate(${-o.viewBox[0]}px, ${-o.viewBox[1]}px)`}])},[l("div",null,[R(o.$slots,"default")])],4)],4)],512))}}),O={class:"h-full flex flex-col"},W={class:"p-2"},j={class:"flex flex-col"},I=y({__name:"Viewer",setup(h){const e=D({viewBox:[0,0,1920,1080]});return(a,s)=>(i(),u("div",O,[l("div",W,[d(" 显示区域 left:"),v(l("input",{class:"w-20","onUpdate:modelValue":s[0]||(s[0]=t=>e.viewBox[0]=t),type:"number"},null,512),[[f,e.viewBox[0]]]),d(" top:"),v(l("input",{class:"w-20","onUpdate:modelValue":s[1]||(s[1]=t=>e.viewBox[1]=t),type:"number"},null,512),[[f,e.viewBox[1]]]),d(" width:"),v(l("input",{class:"w-20","onUpdate:modelValue":s[2]||(s[2]=t=>e.viewBox[2]=t),type:"number"},null,512),[[f,e.viewBox[2]]]),d(" height:"),v(l("input",{class:"w-20","onUpdate:modelValue":s[3]||(s[3]=t=>e.viewBox[3]=t),type:"number"},null,512),[[f,e.viewBox[3]]])]),H(N,{"is-debug":"","auto-scale":!0,scale:1,class:"flex-1 h-0 overflow-hidden bg-gray/20","view-box":e.viewBox},{default:M(()=>[l("div",j,[(i(),u(x,null,g(20,t=>(i(),u(x,null,[(i(),u(x,null,g(20,r=>l("div",{class:"shrink-0 absolute h-100px w-100px bg-gray/50 flex justify-center items-center border-1 border-solid box-border",style:b({left:(t-1)*100-1e3+"px",top:(r-1)*100-1e3+"px"})},B(t)+","+B(r),5)),64))],64))),64))])]),_:1},8,["view-box"])]))}});export{I as default};
